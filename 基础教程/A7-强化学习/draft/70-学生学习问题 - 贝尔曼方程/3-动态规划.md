
### 动态规划（迭代法）

**Those who cannot remember the past are condemned to repeat it.**

**那些不记得过去的人注定要重蹈覆辙。** 这是动态规划的经典名句。下面我们先回忆一下动态规划的基本思想。

### 问题一

妈妈问：“$1+2+3+4=?$”
弟弟（一年级小学生，花了30秒在纸上验算加法然后）答：“等于10。”
爸爸问：“$7+4+3+2+1=?$”
姐姐（五年级小学生花了2秒思考然后立刻）答：“等于17。”
弟弟把刚拿起来的铅笔放下，无限崇拜地看着姐姐：“你是怎么这么快算出来的？”
姐姐说：“在你的答案上直接加 7 就行了。”
爸爸说：“不错，已经知道**利用历史经验**了！”


### 问题二

计算斐波那契数列

$$
f(n)=f(n-1)+f(n-2), \qquad \qquad (f(1)=f(2)=1)
$$

计算 $f(35)=?$

```python
# 递归法
def f1(n):
    if n==1 or n==2:
        return 1
    else:
        fn = f1(n-1) + f1(n-2)  # 递归调用函数本身两次
        return fn

# 迭代法
def f2(n):
    fn_2 , fn_1 = 1, 1
    for i in range(n-2):
        fn = fn_1 + fn_2    # 计算f(n)
        fn_2 = fn_1         # 重新赋值便于下次计算
        fn_1 = fn
    return fn
```
输出：
```
递归法结果 = 9227465
递归法耗时 = 1.783046007156372
迭代法结果 =  9227465
迭代法耗时 = 0.0009317398071289062
```
当计算 $f(50)$ 时，递归法需要花费成指数级增加的时间，复杂度为 $O(2n^2)$。而迭代法仍然是瞬时完成，复杂度 $O(n)$。**递归是思想，迭代是方法，两者都要掌握。**

### 问题三

有一个10级的台阶，弟弟每天放学回家都要经过。他有时候一级一级地上台阶，有时候跳两级，有时候一级两级随意上跳。问：他一共有多少种跳法？这次需要输出所有数列（1级时输出1，2级时输出2，3级时输出3，4级时输出5......）。

其实这是一个斐波那契数列的变形题目，其解题思路在于把问题逐级分解：
- 想跳到第10级台阶，先要跳到第9级或第8级台阶；
  分成两种情况：
  - 想跳到第9级台阶，先要跳到第8级或第7级台阶；
    又分成两种情况：
    - 想跳到第8级台阶，先要跳到第7级或第6级台阶；
      双分成两种情况：
      - 想跳到第7级台阶，先要跳到第6级或第5级台阶；
        叒分成两种情况：
        ......

所以有：

$$
\begin{aligned}
f(10)&=f(9)+f(8) & {\footnotesize (10级台阶有从9到10和从8到10两种组合)}
\\
f(9)&=f(8)+f(7)
\\
\cdots
\\
f(3)&=f(2)+f(1)
\\
f(2)&=2 & {\footnotesize (两级台阶有2种跳法)}
\\
f(1)&=1 & {\footnotesize (一级台阶只有1种跳法)}
\end{aligned}
$$

```python
# 备忘录法
def f3(n):
    results = {1:1, 2:2}    # 当n=1和n=2时的结果是1和2
    for i in range(3, n+1):
        fi = results[i-1] + results[i-2]    # 从字典中直接取出结果
        results[i] = fi     # 在字典中添加n=i时的结果,i=3,4,5...
    return results
```
输出
```
备忘录法结果 = {1: 1, 2: 2, 3: 3, 4: 5, 5: 8, 6: 13, 7: 21, 8: 34, 9: 55, 10: 89}
```
所以10级台阶一共有 89 种跳法。

动态规划最核心的思想，就在于拆分子问题，记住过往，减少重复计算

所以，**动态规划**，简单地说就是**记住求过解来节省后续的计算时间**。


### 参考资料

https://cloud.tencent.com/developer/article/1817113

https://zhuanlan.zhihu.com/p/70689256
